// INDEX

.scroll
  position: fixed
  top: 0
  left: 0
  transition: transform .05s linear

+r($tablet)
  .scroll
    position: static

// управление параллаксом детей через width
// Math.floor(deltaW * scrollPercent)

.stages
  position: relative
  flex: 1 1 auto
  display: flex
  flex-direction: column
  transition: transform .1s linear
  &::after
    display: inline-block
    content: ' '
    position: fixed
    top: 0
    left: 0
    right: 0
    bottom: calc(5vh + 84px)
    background: linear-gradient( to bottom, #ded5c5 0%, #d8bb91 100%)

+r($wide)
  .stages
    &::after
      bottom: calc(5vh + 64px)

+r($desktop)
  .stages
    &::after
      bottom: calc(5vh + 54px)

+r($tablet)
  .stages
    &::after
      bottom: 0

// .stage
//   position: relative
//   flex: 1 1 auto
//   display: flex
//   flex-direction: column

// PHOTOS
.stage-photos
  position: fixed
  z-index: 5
  top: 0
  left: 0
  right: 0
  &__wrapper
    position: relative
    img
      position: fixed
      top: 0
      left: 0
      max-width: 100%
      transform-origin: top center
      opacity: 0
      pointer-events: none
      transform: translate3d(0,-100%,0)
      transition: transform .5s ease-in, opacity .3s linear
      &.is-active
        pointer-events: all
        opacity: 1
        transform: translate3d(0,0%,0)
      &.is-hovered
        cursor: pointer
        transform: translate3d(0,0,0) scale(1.02)

+r($tablet)
  .stage-photos
    display: none

// BG
.stage-background
  display: flex
  align-items: flex-end
  width: 280vw
  top: auto
  // stage nav + road offset - 10 road boarder
  bottom: calc(5vh + 84px + 155px)
  z-index: 10
  pointer-events: none
  img
    // flex: 0 1 100%
    max-width: 100vw
    // width: 100%
    height: auto


+r($wide)
  .stage-background
    bottom: calc(5vh + 64px + 112px)

+r($w1200)
  .stage-background
    bottom: calc(5vh + 64px + 100px)

+r($desktop)
  .stage-background
    bottom: calc(5vh + 54px + 86px)

// TEXT
.stage-text
  width: 280vw
  bottom: calc(5vh + 84px + 100px)
  display: flex
  color: $colorRed
  z-index: 20
  pointer-events: none
  &__wrapper
    display: block
    max-width: calc(50vw - 8.3vw)
    margin: auto 8.3vw auto 50vw
    padding: 30px 0px 30px 50px
    cursor: pointer
    pointer-events: all
    &--color2
      color: #3c5460
  &__top
    display: flex
    align-items: flex-end
    width: 100%
    &:hover
      .stage-text__title
        span::after
          opacity: 0
          bottom: 5px
  &__title
    font-size: 67px
    font-family: 'a_BodoniOrtoTitul', serif
    text-transform: uppercase
    span
      position: relative
      &::after
        display: inline-block
        content: ' '
        position: absolute
        bottom: 2px
        height: 3px
        left: 0
        right: 0
        z-index: 1
        background: currentColor
        transition: all $transitionSpeed ease-out
  &__short
    margin-top: 30px
    font-size: 20px
  &__logo
    flex: 0 1 250px
    margin-left: 5%
    img
      max-width: 100%
  &__mobile
    display: none
    margin: 70px -50px
    img
      max-width: 100%

+r($xl)
  .stage-text
    &__title
      font-size: 60px
    &__short
      font-size: 18px

+r($hd)
  .stage-text
    &__title
      font-size: 55px
    &__short
      font-size: 17px

+r($wide)
  .stage-text
    bottom: calc(5vh + 64px + 80px)
    &__title
      font-size: 50px
    &__short
      font-size: 14px

+r($desktop)
  .stage-text
    bottom: calc(5vh + 54px + 60px)
    &__title
      font-size: 44px
    &__short
      font-size: 12px

+r($tablet)
  .stage-text
    width: 100vw
    align-items: flex-start
    &__wrapper
      flex: 0 0 auto
      width: 100vw
      max-width: 100vw
      margin: 100px 0 100px 0
      padding: 30px 50px 30px 50px
    &__mobile
      display: block
    &__title
      font-size: 60px
      margin-right: auto
    &__short
      font-size: 24px
    &__top
      flex-direction: row-reverse
      align-items: center
    &__logo
      margin-left: 0
      margin-right: 5%

// TIMELINE
.stage-timeline
  width: 280vw
  z-index: 30
  top: auto
  // stage nav offset
  bottom: calc(5vh + 84px)
  &__wrapper
    position: relative
    display: flex
  &__road
    position: absolute
    bottom: 0
    z-index: 1
    display: flex
    align-items: flex-end
  &__cars
    width: 100vw
    display: flex
    position: relative
    left: 0
    right: 0
    z-index: 2

+r($wide)
  .stage-timeline
    bottom: calc(5vh + 64px)
    &__road
      img
        max-width: 1336px

+r($w1200)
  .stage-timeline
    &__road
      img
        max-width: 1200px

+r($desktop)
  .stage-timeline
    bottom: calc(5vh + 54px)
    &__road
      img
        max-width: 1024px

+r($tablet)
  .stage-timeline
    &__road
      max-width: 100%

.stage-car
  flex: 0 0 auto
  img
    max-width: 100%
    transform-origin: center
    transition: transform .3s ease
    &.is-hovered, &:hover
      cursor: pointer
      transform: scale(1.02)
  &--1_1
    align-self: flex-end
    margin-left: 17%
    margin-bottom: 30px
  &--1_2
    align-self: flex-start
    margin-left: 13%
    margin-bottom: 55px

  &--2_1
    align-self: center
    margin-left: 17%
    margin-bottom: -20px
  &--2_2
    align-self: center
    margin-left: 20%
    margin-bottom: 10px

+r($hd)
  .stage-car
    img
      max-width: 90%

+r($wide)
  .stage-car
    img
      max-width: 75%
    &--1_2
      margin-left: 5%
    &--2_2
      margin-left: 10%

+r($w1200)
  .stage-car
    img
      max-width: 65%
    &--1_1
      margin-bottom: 25px
    &--1_2
      margin-left: 0%
      margin-bottom: 35px
    &--2_2
      margin-left: 5%

+r($desktop)
  .stage-car
    img
      max-width: 55%
    &--1_1
      margin-bottom: 15px
    &--1_2
      margin-bottom: 25px
